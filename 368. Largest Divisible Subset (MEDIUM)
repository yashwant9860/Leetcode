class Solution {
public:
    vector<int> largestDivisibleSubset(vector<int>& nums) {
        sort(nums.begin(),nums.end());
        int n=nums.size(),best=1,ind=0;
        int dp[n+1];
        fill_n(dp,n+1,1);
        for(int i=1;i<n;i++)
        {
            for(int j=0;j<i;j++)
            {
                if(nums[i]%nums[j]==0)
                    dp[i]=max(dp[i],dp[j]+1);
                if(best<dp[i])
                {
                    ind=i;
                    best=dp[i];
                }
            }
        }
        vector<int>ans;
        for(int i=best;i>0;i--)
        {
            ans.push_back(nums[ind]);
            int j=ind-1;
            while(j>=0&&!(nums[ind]%nums[j]==0&&dp[j]==dp[ind]-1))
                j--;
            ind =j;
        }
        return ans;
    }
};

class Solution {
public:
    vector<int> productExceptSelf(vector<int>& nums) {
        vector<int>v,v1,v2;
        int n=nums.size(),p=INT_MIN,z=0;
        for(int i=0;i<n;i++)
        {
            if(nums[i]==0)
            {
                z++;
                v.push_back(i);
            }
            else
                p=i;
            v1.push_back(0);
        }
        int ans=1;
        if(z>=2 || p==INT_MIN)
            return v1;
        if(z==1)
        {
            for(int i=0;i<n;i++)
            {
                if(i!=v[0])
                ans*=nums[i];
            }
            for(int i=0;i<n;i++)
            {
                if(i==v[0])
                    v2.push_back(ans);
                else
                    v2.push_back(0);
            }
        }
        else
        {
            for(int i=0;i<n-1;i++)
                ans*=nums[i];
                
            for(int i=0;i<n-1;i++)
                v2.push_back((ans/nums[i])*nums[n-1]);
            
            v2.push_back(ans);
        }
    return v2;
    }
};

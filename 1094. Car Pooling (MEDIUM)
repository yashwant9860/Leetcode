class Solution {
    static bool f(vector<int>&a,vector<int>&b)
    {
        return a[1]<b[1];
    }
public:
    bool carPooling(vector<vector<int>>& trips, int capacity) {
        sort(trips.begin(),trips.end(),f);
        int n=trips.size(),currcap=trips[0][0];
        priority_queue<pair<int,int>>m;
        m.push(make_pair(-trips[0][2],trips[0][0]));
        if(capacity<currcap)
            return false;
        for(int i=1;i<n;i++)
        {
            while(!m.empty()&&trips[i][1]>=-m.top().first)
            {
                currcap-=m.top().second;
                m.pop();
            }
            if(currcap+trips[i][0]>capacity)
                return false;
            else
            {
                currcap+=trips[i][0];
                m.push(make_pair(-trips[i][2],trips[i][0]));
            }
            
        }
        return true;
            
    }
};

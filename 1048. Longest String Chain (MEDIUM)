class Solution {
    static bool f(string a,string b)
    {
        return a.length()<b.length();
    }
public:
    int longestStrChain(vector<string>& words) {
        sort(words.begin(),words.end(),f);
        int n=words.size(),best=1;
        vector<int>v(n,1);
        for(int i=0;i<n;i++)
        {
            int j=i,k=words[i].length();
            while(j<n&&words[j].length()==k)
                j++;
            if(j==n)
                return best;
            for(int x=j;x<n&&words[x].length()==k+1;x++)
            {
                int flag=0;
                for(int z=0,p=0;z<k+1;)
                {
                    if(words[x][z]==words[i][p])
                    {z++;p++;}
                    else 
                    {z++;flag++;}
                    if(flag==2)
                        break;
                }
                if(flag==1)
                {v[x]=max(v[x],v[i]+1);}
                best=max(best,v[x]);
            }
        }
        return best;
    }
};

class Solution {
public:
    vector<string> subdomainVisits(vector<string>& cpdomains) {
        int n=cpdomains.size();
        map<string,int>m;
        vector<string>d;
        for(int i=0;i<n;i++)
        {
            int v=0;
            string k="";
            string k1="";
            string k2="";
            int flag1=0,flag2=0;
            for(int j=0;j<cpdomains[i].length();j++)
            {
                if(cpdomains[i][j]==' ')
                {
                    v=stoi(k);
                    k="";
                }
                else
                {
                    if(flag1==1)
                        k1+=cpdomains[i][j];
                    if(flag2==1)
                        k2+=cpdomains[i][j];
                    k+=cpdomains[i][j];
                }
                
                if(flag1==0 && cpdomains[i][j]=='.')
                    flag1=1;
                else if(flag2==0&&cpdomains[i][j]=='.')
                    flag2=1;
            }
            cout<<k<<" "<<k1<<" "<<k2<<" "<<v<<endl;
            if(m.find(k)!=m.end())
                m[k]+=v;
            else
            {
                d.push_back(k);
                m.insert({k,v});
            }
            if(m.find(k1)!=m.end())
                m[k1]+=v;
            else
            {
                d.push_back(k1);
                m.insert({k1,v});
            }
            if(k2!=""&&m.find(k2)!=m.end())
                m[k2]+=v;
            else if(k2!="") 
            {
                d.push_back(k2);
                m.insert({k2,v});
            }
            
        }
        for(int i=0;i<d.size();i++)
        {
           int p=m[d[i]];
           string l=to_string(p);
            l+=' ';
            l+=d[i];
            d[i]=l;
        }
        return d;
    }
};

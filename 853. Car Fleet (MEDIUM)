class Solution {
public:
    int carFleet(int target, vector<int>& position, vector<int>& speed) {
        int n=position.size();
        vector<pair<int,int>>v(n);
        for(int i=0;i<n;i++)
            v[i]={position[i],speed[i]};
        sort(v.begin(),v.end(),greater<pair<int,int>>{});
        int cnt=1,a=target-v[0].first,b=v[0].second;
        for(int i=1;i<n;i++)
        {
            if((long long)a*v[i].second<(long long)b*(target-v[i].first))
            {
                a=target-v[i].first,b=v[i].second;
                cnt++;
            }
            else
            {
                while(i<n&&(long long)a*v[i].second>=(long long)b*(target-v[i].first))
                i++;
                i--;
                a=target-v[i].first,b=v[i].second;
            }
        }
        return cnt;
    }
};

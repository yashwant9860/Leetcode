class Solution {
    int dp[101][101][21];
    const int max_cost=1000001;
    int topdown(vector<int>&h,vector<vector<int>>&cost,int t,int last,int ind)
    {
        int m=h.size(),n=cost[0].size();
        if(ind==m)
        {
            return t==0?0:max_cost;
        }
        if(t<0)
            return max_cost;
        if(dp[ind][t][last]!=-1)
            return dp[ind][t][last];
        int mincost=max_cost;
        if(h[ind])
        {
            if(last!=h[ind])
            mincost=topdown(h,cost,t-1,h[ind],ind+1);
            else
                mincost=topdown(h,cost,t,h[ind],ind+1);
        }
        else
        {
            for(int i=1;i<=n;i++)
            {
                int newn=t-(i!=last);
                int currcost=cost[ind][i-1]+topdown(h,cost,newn,i,ind+1);
                mincost=min(mincost,currcost);
            }
        }
        return dp[ind][t][last]=mincost;
        
    }
public:
    int minCost(vector<int>& houses, vector<vector<int>>& cost, int m, int n, int target) {
        memset(dp,-1,sizeof dp);
        int ans=topdown(houses,cost,target,0,0);
        return ans==max_cost?-1:ans;
    }
};
